<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EC Web</title>
</head>
<body>
<p>
    <img src="images/jjug_logo@2x.png">
</p>
<h2>JJUG Shop</h2>

<form method="post" onsubmit="return submitCustomer(this);">
    Name: <input type="text" id="name" name="name" required><br>
    Email: <input type="email" id="email" name="email"><br>
    <br>
    <input id="register" type="submit" value="Register">

    <p id="result">

    </p>
</form>
</body>
<script src="js/axios.min.js"></script>
<script>
    function submitCustomer(form) {
        var name = form.name.value, email = form.email.value;
        form.register.disabled = true;
        axios.post('/api/customers', {name: name, email: email})
                .then(function (response) {
                    console.log(response);
                    form.register.disabled = false;
                    alert('Welcome ' + response.data.name + '!!');
                    form.reset();
                    showResult(response.data);
                })
                .catch(function (error) {
                    console.log(error);
                    form.register.disabled = false;
                });
        return false;
    }

    function showResult(data) {
        document.getElementById('result').innerHTML = '<a href="' + data._links.self.href + '">' + data._links.self.href + '</href>';
    }
</script>
</html>